---
import { getCollection } from 'astro:content';
import DocsLayout from '../../layouts/DocsLayout.astro';

export async function getStaticPaths() {
  const docs = await getCollection('docs');
  return docs.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content, headings } = await entry.render();

// Get all docs for sidebar navigation
const allDocs = await getCollection('docs');

// Filter out non-root docs if any, or just sort them
// Sort by filename/slug naturally to keep 01, 02 in order
const sortedDocs = allDocs.sort((a, b) => a.slug.localeCompare(b.slug));
---

<DocsLayout 
    title={entry.data.title || entry.slug} 
    headings={headings}
    entries={sortedDocs}
    currentSlug={entry.slug}
>
    <Content />
</DocsLayout>
